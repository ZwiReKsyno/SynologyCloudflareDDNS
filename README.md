# –°–∫—Ä–∏–ø—Ç Synology Cloudflare DDNS  üìú

–≠—Ç–æ —Å—Ü–µ–Ω–∞—Ä–∏–π, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è [Cloudflare](https://www.cloudflare.com/) –≤ –∫–∞—á–µ—Å—Ç–≤–µ DDNS –∫ [Synology](https://www.synology.com/)  NAS. –í —Å–∫—Ä–∏–ø—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π API Cloudflare API v4.

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –î–æ—Å—Ç—É–ø –∫ Synology —á–µ—Ä–µ–∑ SSH

1. –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π DSM
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è > –¢–µ—Ä–º–∏–Ω–∞–ª –∏ SNMP > –í–∫–ª—é—á–∏—Ç—å —Å–ª—É–∂–±—É SSH.
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–π –∫–ª–∏–µ–Ω—Ç –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ Synology —á–µ—Ä–µ–∑ SSH.
4. –î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ—é —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ Synology.

### –ó–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥ –≤ Synology

1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ cloudflareddns.sh–∏–∑ —ç—Ç–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è/sbin/cloudflareddns.sh

```
wget https://raw.githubusercontent.com/joshuaavalon/SynologyCloudflareDDNS/master/cloudflareddns.sh -O /sbin/cloudflareddns.sh
```

–≠—Ç–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –≤—ã –º–æ–∂–µ—Ç–µ —É–∫–∞–∑–∞—Ç—å –≤—Å–µ, —á—Ç–æ –∑–∞—Ö–æ—Ç–∏—Ç–µ. –ï—Å–ª–∏ –≤—ã –ø–æ–º–µ—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø–æ–¥ –¥—Ä—É–≥–æ–µ –∏–º—è –∏–ª–∏ –ø—É—Ç—å, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å.

2. –î–∞–π—Ç–µ –¥—Ä—É–≥–∏–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

```
chmod +x /sbin/cloudflareddns.sh
```

3. –î–æ–±–∞–≤–∏—Ç—å cloudflareddns.sh–≤ Synology

```
cat >> /etc.defaults/ddns_provider.conf << 'EOF'
[Cloudflare]
        modulepath=/sbin/cloudflareddns.sh
        queryurl=https://www.cloudflare.com
        website=https://www.cloudflare.com
E*.
```

queryurl –Ω–µ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è, –ø–æ—Ç–æ–º—É —á—Ç–æ –º—ã —Å–æ–±–∏—Ä–∞–µ–º—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—à —Å–∫—Ä–∏–ø—Ç, –Ω–æ –æ–Ω –Ω–µ–æ–±—Ö–æ–¥–∏–º.

### –ü–æ–ª—É—á–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã Cloudflare

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–±–∑–æ—Ä–∞ —Å–≤–æ–µ–≥–æ –¥–æ–º–µ–Ω–∞ –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–≤–æ–µ–π –∑–æ–Ω—ã.
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å > –¢–æ–∫–µ–Ω—ã API > –°–æ–∑–¥–∞—Ç—å —Ç–æ–∫–µ–Ω . –û–Ω –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è Zone > DNS > Edit. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω API.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –î–î–ù–°

1. –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π DSM
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è > –í–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø > DDNS > –î–æ–±–∞–≤–∏—Ç—å.
3. –í–≤–µ–¥–∏—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ:
   - –ü–æ—Å—Ç–∞–≤—â–∏–∫ —É—Å–ª—É–≥:Cloudflare
   - –ò–º—è —Ö–æ—Å—Ç–∞:www.example.com
   - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/—ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞:<Zone ID>
   - –ö–ª—é—á –ø–∞—Ä–æ–ª—è:<API Token>
